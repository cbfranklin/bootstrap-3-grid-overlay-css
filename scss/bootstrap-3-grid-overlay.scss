$overlay-color-1: rgba(74, 144, 226, 0.75);
$overlay-color-2: rgba(189, 16, 224, 0.75);
$overlay-color-3: rgba(255, 154, 0, 0.75);
$overlay-color-4: rgba(213, 250, 0, 0.75);
$overlay-color-5: rgba(47, 214, 99, 0.75);

$col-padding : 10px;
$num-of-cols : 12;

$col-width : (100 / $num-of-cols);

@mixin grid-overlay($gridColor){
  // awesome scss loopage for gradient stops
  // (@jackiebackwards https://codepen.io/jackiebackwards/pen/Fzkvg)
  $first-stops: transparent #{$col-padding},
                $gridColor #{$col-padding};

  $last-stops: $gridColor calc(100% - #{$col-padding}),
               transparent calc(100% - #{$col-padding});


  @for $i from 1 through ($num-of-cols - 1) {
    $new-stops: $gridColor calc(#{$i*$col-width}% - #{$col-padding}),
                transparent calc(#{$i*$col-width}% - #{$col-padding}),
                transparent calc(#{$i*$col-width}% + #{$col-padding}),
                $gridColor calc(#{$i*$col-width}% + #{$col-padding});

    $first-stops: join($first-stops, $new-stops, comma);
  }

  $stops: join($first-stops, $last-stops, comma);

  background: linear-gradient(90deg, $stops), no-repeat;
}

// currently supporting 4 nested rows
.row{
  @include grid-overlay($overlay-color-1);
}
.row .row{
  @include grid-overlay($overlay-color-2);
}
.row .row .row{
  @include grid-overlay($overlay-color-5);
}
.row .row .row .row{
  @include grid-overlay($overlay-color-1);
}
.row .row .row .row .row{
  @include grid-overlay($overlay-color-2);
}
.row .row .row .row .row .row{
  @include grid-overlay($overlay-color-5);
}

// currently supporting 2 nested col-centered

$col-centered-selectors: '';
$col-centered-selectors-2-deep: '';
// create selector for each col-centered-* class
@for $i from 1 through 12{
  $selector: '.col-centered-#{$i}';
  $selectors-2-deep: '';
  // create nesting for each col-centered-* class within each col-centered-* class
  @for $j from 1 through 12{
    $selector-2-deep: '.col-centered-#{$i} .col-centered-#{$j}';
    $selectors-2-deep: join($selectors-2-deep, $selector-2-deep, comma);
  }
  $col-centered-selectors-2-deep: join($col-centered-selectors-2-deep, $selectors-2-deep, comma);
  $col-centered-selectors: join($col-centered-selectors, $selector, comma);

}

#{$col-centered-selectors} {
  @include grid-overlay($overlay-color-3);
}

#{$col-centered-selectors-2-deep} {
  @include grid-overlay($overlay-color-4);
}
